{% extends "base.html" %}

{% block title %}Carrinho - Barbearia Premium{% endblock %}

{% block content %}
<header>
    <div class="container">
        <div class="header-top">
            <a href="/" class="menu-btn" style="text-decoration: none;">â†</a>
            <div class="logo-container">
                <div class="logo-text">Meu Carrinho</div>
            </div>
            <div style="width: 48px;"></div>
        </div>
    </div>
</header>

<main class="container" style="margin-top: 20px;">
    {% if itens %}
    <div>
        {% for item in itens %}
        <div class="carrinho-item">
            <div class="carrinho-item-imagem">
                {% if item.imagem %}
                <img src="{{ item.imagem }}" alt="{{ item.nome }}" style="width: 100%; height: 100%; object-fit: cover;">
                {% else %}
                {% if item.tipo == 'servico' %}âœ‚ï¸{% else %}ğŸ§´{% endif %}
                {% endif %}
            </div>
            <div class="carrinho-item-info">
                <div class="carrinho-item-nome">{{ item.nome }}</div>
                <div class="carrinho-item-preco">{{ item.preco|currency }}</div>
                
                <div style="display: flex; align-items: center; gap: 12px; margin-top: 12px;">
                    <div style="font-size: 14px; color: var(--cinza-claro); font-weight: 600;">
                        Quantidade:
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <button onclick="alterarQuantidadeCarrinho('{{ item.tipo }}', {{ item.id }}, {{ item.quantidade - 1 }})" 
                                class="btn btn-quantity" {% if item.quantidade <= 1 %}disabled{% endif %}>
                            âˆ’
                        </button>
                        <span style="min-width: 32px; text-align: center; font-weight: 700; font-size: 16px;">
                            {{ item.quantidade }}
                        </span>
                        <button onclick="alterarQuantidadeCarrinho('{{ item.tipo }}', {{ item.id }}, {{ item.quantidade + 1 }})" 
                                class="btn btn-quantity">
                            +
                        </button>
                    </div>
                </div>
                
                {% if item.quantidade > 1 %}
                <div style="font-size: 14px; color: var(--azul-neon); margin-top: 8px; font-weight: 600;">
                    Subtotal: {{ (item.preco * item.quantidade)|currency }}
                </div>
                {% endif %}
                
                <div class="carrinho-item-acoes" style="margin-top: 12px;">
                    <button onclick="removerDoCarrinho('{{ item.tipo }}', {{ item.id }})" class="btn btn-secondary btn-small">
                        ğŸ—‘ï¸ Remover
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="total-carrinho">
        <div class="total-label">Total do Pedido:</div>
        <div class="total-valor">{{ total|currency }}</div>
    </div>
    
    <div style="display: flex; gap: 12px; margin-bottom: 24px;">
        <button onclick="limparCarrinho()" class="btn btn-secondary" style="flex: 1;">
            ğŸ—‘ï¸ Limpar Carrinho
        </button>
        <a href="/checkout" class="btn btn-primary" style="flex: 1;">
            âœ… Finalizar Pedido
        </a>
    </div>
    {% else %}
    <div style="text-align: center; padding: 60px 20px;">
        <div style="font-size: 80px; margin-bottom: 20px; opacity: 0.3;">ğŸ›’</div>
        <h2 style="font-size: 24px; margin-bottom: 12px;">Carrinho Vazio</h2>
        <p style="color: var(--cinza-claro); margin-bottom: 24px;">Adicione serviÃ§os ou produtos para continuar</p>
        <a href="/" class="btn btn-primary">Explorar CatÃ¡logo</a>
    </div>
    {% endif %}
</main>
{% endblock %}
