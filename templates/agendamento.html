{% extends "base.html" %}

{% block title %}Agendamento - Barbearia Premium{% endblock %}

{% block content %}
<header>
    <div class="container">
        <div class="header-top">
            <a href="/" class="menu-btn" style="text-decoration: none;">‚Üê</a>
            <div class="logo-container">
                <div class="logo-text">Agendar Hor√°rio</div>
            </div>
            <div style="width: 48px;"></div>
        </div>
    </div>
</header>

<main class="container" style="margin-top: 20px;">
    <div style="background: var(--cinza-escuro); border-radius: 20px; padding: 24px; margin-bottom: 20px;">
        <h2 style="font-size: 24px; color: var(--azul-neon); margin-bottom: 24px;">üìÖ Novo Agendamento</h2>
        
        <form onsubmit="criarAgendamento(event)">
            <div class="form-group">
                <label for="servico">Servi√ßo</label>
                <select id="servico" name="servico" required>
                    <option value="">Selecione um servi√ßo</option>
                    {% for servico in servicos %}
                    <option value="{{ servico.id }}">{{ servico.nome }} - {{ servico.preco|currency }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="barbeiro">Barbeiro</label>
                <select id="barbeiro" name="barbeiro" required onchange="buscarHorariosDisponiveis()">
                    <option value="">Selecione um barbeiro</option>
                    {% for barbeiro in barbeiros %}
                    <option value="{{ barbeiro.id }}">{{ barbeiro.nome }}{% if barbeiro.especialidade %} - {{ barbeiro.especialidade }}{% endif %}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="data">Data</label>
                <input type="date" id="data" name="data" required onchange="buscarHorariosDisponiveis()">
            </div>
            
            <div class="form-group">
                <label for="horario">Hor√°rio</label>
                <select id="horario" name="horario" required>
                    <option value="">Selecione data e barbeiro primeiro</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="observacoes">Observa√ß√µes (opcional)</label>
                <textarea id="observacoes" name="observacoes" rows="3" placeholder="Alguma prefer√™ncia ou detalhe especial?"></textarea>
            </div>
            
            <button type="submit" class="btn btn-primary" style="width: 100%;">
                ‚úÖ Confirmar Agendamento
            </button>
        </form>
    </div>
    
    <div style="background: var(--cinza-medio); border-radius: 16px; padding: 20px; border-left: 4px solid var(--azul-neon);">
        <h3 style="font-size: 16px; color: var(--azul-neon); margin-bottom: 12px;">‚ÑπÔ∏è Informa√ß√µes Importantes</h3>
        <ul style="color: var(--cinza-claro); font-size: 14px; line-height: 1.8; padding-left: 20px;">
            <li>Chegue com 5 minutos de anteced√™ncia</li>
            <li>Em caso de atraso, aguarde na fila virtual</li>
            <li>Cancelamentos devem ser feitos com 2h de anteced√™ncia</li>
            <li>Hor√°rio de funcionamento: 09:00 √†s 20:00</li>
        </ul>
    </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dataInput = document.getElementById('data');
    const hoje = new Date();
    hoje.setHours(0, 0, 0, 0);
    
    const dataMinima = hoje.toISOString().split('T')[0];
    dataInput.setAttribute('min', dataMinima);
    
    dataInput.addEventListener('change', function() {
        const dataSelecionada = new Date(this.value + 'T00:00:00');
        if (dataSelecionada < hoje) {
            alert('N√£o √© poss√≠vel agendar em datas passadas. Por favor, selecione a data de hoje ou uma data futura.');
            this.value = '';
        }
    });
});
</script>
{% endblock %}
